# T-YEP-600-REN_13

Projet de fin d'ann√©e - Application Rails avec Vite et Tailwind CSS

> üê≥ **D√©marrage rapide avec Docker** : Consultez la [documentation Docker compl√®te](docker/README.md) pour un environnement de d√©veloppement conteneuris√©.

## Technologies utilis√©es

- **Ruby on Rails 8.0.2** - Framework web backend
- **PostgreSQL** - Base de donn√©es
- **Vite** - Build tool et serveur de d√©veloppement frontend
- **Vue.js 3** - Framework JavaScript frontend
- **Tailwind CSS** - Framework CSS utilitaire
- **Devise** - Authentification utilisateur
- **OpenAI API** - G√©n√©ration de mind-maps, quiz et flashcards

## Pr√©requis

### Option 1 : Environnement Docker (recommand√©)

- **Docker** et **Docker Compose v2**
- **Git**

### Option 2 : Installation locale

- **Ruby** (version 3.2.2 recommand√©e)
- **Node.js** (version 20.19.0+ ou 22.12.0+)
- **PostgreSQL**
- **Git**

## ‚ö†Ô∏è Configuration de l'API OpenAI

**IMPORTANT** : Cette application n√©cessite une cl√© API OpenAI pour fonctionner correctement.

1. Cr√©ez un fichier `.env` √† la racine du projet
2. Ajoutez votre cl√© API OpenAI dans ce fichier au format suivant :

Trae

Je vais v√©rifier le contenu du README.md pour y ajouter les instructions concernant la cr√©ation du fichier .env et l'ajout de la cl√© API.

README.md 1 - 100

Je vais continuer √† lire le README pour voir s'il y a d√©j√† des informations sur les variables d'environnement ou la configuration de l'API.

README.md 100 - 200

Je vais continuer √† lire le README pour voir s'il y a des informations sur la configuration des variables d'environnement.

README.md 200 - 279

Voici les modifications √† apporter au README.md pour inclure les instructions concernant la cr√©ation du fichier .env et l'ajout de la cl√© API :

```
#¬†T-YEP-600-REN_13

Projet¬†de¬†fin¬†d'ann√©e¬†-¬†Application¬†Rails¬†avec¬†Vite¬†et¬†Tailwind¬†CSS

>¬†üê≥¬†**D√©marrage¬†rapide¬†avec¬†Docker**¬†:¬†Consultez¬†la¬†[documentation¬†
Docker¬†compl√®te](docker/README.md)¬†pour¬†un¬†environnement¬†de¬†
d√©veloppement¬†conteneuris√©.

##¬†Technologies¬†utilis√©es

-¬†**Ruby¬†on¬†Rails¬†8.0.2**¬†-¬†Framework¬†web¬†backend
-¬†**PostgreSQL**¬†-¬†Base¬†de¬†donn√©es
-¬†**Vite**¬†-¬†Build¬†tool¬†et¬†serveur¬†de¬†d√©veloppement¬†frontend
-¬†**Vue.js¬†3**¬†-¬†Framework¬†JavaScript¬†frontend
-¬†**Tailwind¬†CSS**¬†-¬†Framework¬†CSS¬†utilitaire
-¬†**Devise**¬†-¬†Authentification¬†utilisateur
-¬†**OpenAI¬†API**¬†-¬†G√©n√©ration¬†de¬†mind-maps,¬†quiz¬†et¬†flashcards

##¬†Pr√©requis

###¬†Option¬†1¬†:¬†Environnement¬†Docker¬†(recommand√©)

-¬†**Docker**¬†et¬†**Docker¬†Compose¬†v2**
-¬†**Git**

###¬†Option¬†2¬†:¬†Installation¬†locale

-¬†**Ruby**¬†(version¬†3.2.2¬†recommand√©e)
-¬†**Node.js**¬†(version¬†20.19.0+¬†ou¬†22.12.0+)
-¬†**PostgreSQL**
-¬†**Git**

##¬†‚ö†Ô∏è¬†Configuration¬†de¬†l'API¬†OpenAI

**IMPORTANT**¬†:¬†Cette¬†application¬†n√©cessite¬†une¬†cl√©¬†API¬†OpenAI¬†pour¬†
fonctionner¬†correctement.

1.¬†Cr√©ez¬†un¬†fichier¬†`.env`¬†√†¬†la¬†racine¬†du¬†projet
2.¬†Ajoutez¬†votre¬†cl√©¬†API¬†OpenAI¬†dans¬†ce¬†fichier¬†au¬†format¬†suivant¬†:
```
OPENAI_API_KEY=votre_cl√©_api_ici
OPENAI_MINDMAP_MODEL=gpt-4o-2024-08-06
OPENAI_QUIZ_MODEL=gpt-4o-2024-08-06
OPENAI_FLASHCARDS_MODEL=gpt-4o-2024-08-06

```
3.¬†Pour¬†obtenir¬†une¬†cl√©¬†API¬†valide,¬†veuillez¬†contacter¬†l'√©quipe¬†du¬†
projet¬†car¬†les¬†frais¬†d'utilisation¬†sont¬†√†¬†leur¬†charge

>¬†**Note**¬†:¬†Le¬†fichier¬†`.env`¬†est¬†ignor√©¬†par¬†Git¬†et¬†ne¬†sera¬†pas¬†
inclus¬†dans¬†vos¬†commits

##¬†Installation¬†et¬†Setup

//¬†...¬†reste¬†du¬†README¬†inchang√©
```
Je recommande d'ajouter cette section juste apr√®s les pr√©requis et avant les instructions d'installation. Cela met en √©vidence l'importance de configurer la cl√© API avant de commencer √† utiliser l'application.

La section inclut :

1. 1.
   Un avertissement clair sur la n√©cessit√© d'une cl√© API
2. 2.
   Les instructions pr√©cises pour cr√©er le fichier .env
3. 3.
   Le format exact des variables d'environnement √† ajouter
4. 4.
   Une note indiquant que les utilisateurs doivent contacter l'√©quipe pour obtenir une cl√© API
5. 5.
   Une mention que le fichier .env est ignor√© par Git pour des raisons de s√©curit√©
Voulez-vous que j'apporte d'autres modifications √† ces instructions ?

Theo Lordelot

Copy

Delete

## ‚ö†Ô∏è Configuration de l'API OpenAI

**IMPORTANT** : Cette application n√©cessite une cl√© API OpenAI pour fonctionner correctement.

1. Cr√©ez un fichier `.env` √† la racine du projet

2. Ajoutez votre cl√© API OpenAI dans ce fichier au format suivant :


##¬†‚ö†Ô∏è¬†Configuration¬†de¬†l'API¬†OpenAI

**IMPORTANT**¬†:¬†Cette¬†application¬†n√©cessite¬†une¬†cl√©¬†API¬†OpenAI¬†pour¬†
fonctionner¬†correctement.¬†Sans¬†cette¬†configuration,¬†les¬†
fonctionnalit√©s¬†de¬†g√©n√©ration¬†de¬†mind-maps,¬†quiz¬†et¬†flashcards¬†ne¬†
seront¬†pas¬†disponibles.

###¬†√âtapes¬†de¬†configuration

1.¬†Cr√©ez¬†un¬†fichier¬†`.env`¬†√†¬†la¬†racine¬†du¬†projet¬†(au¬†m√™me¬†niveau¬†
que¬†le¬†fichier¬†README.md)

2.¬†Ajoutez¬†votre¬†cl√©¬†API¬†OpenAI¬†et¬†les¬†mod√®les¬†√†¬†utiliser¬†dans¬†ce¬†
fichier¬†au¬†format¬†suivant¬†:

OPENAI_API_KEY=votre_cl√©_api_ici

3. **Obtention de la cl√© API** : Pour obtenir une cl√© API valide, veuillez contacter l'√©quipe du projet.Dans le contexte de l'√©valuation de ce projet Les frais d'utilisation de l'API sont pris en charge par l'√©quipe, c'est pourquoi vous ne devez pas utiliser votre propre cl√© personnelle.

### Remarques importantes

- Le fichier `.env` est d√©j√† configur√© pour √™tre ignor√© par Git (via `.gitignore`), ce qui garantit que votre cl√© API ne sera pas partag√©e accidentellement dans le d√©p√¥t.
- En cas de probl√®me d'acc√®s √† l'API, v√©rifiez d'abord que votre fichier `.env` est correctement configur√© et que la cl√© API est valide.
- Les mod√®les sp√©cifi√©s (gpt-4o-2024-08-06) sont recommand√©s pour des performances optimales, mais peuvent √™tre modifi√©s si n√©cessaire.
- **Note importante** : Cette approche de gestion des cl√©s API est sp√©cifique au contexte de projet scolaire. Dans un environnement de production r√©el, les cl√©s API et autres secrets seraient g√©r√©s diff√©remment, g√©n√©ralement via des services de gestion de secrets s√©curis√©s (comme AWS Secrets Manager, HashiCorp Vault, etc.) ou des variables d'environnement configur√©es au niveau de l'infrastructure, et jamais partag√©es directement entre utilisateurs.


## Installation et Setup

### üê≥ Option A : Avec Docker (recommand√©)

> üìñ **Documentation compl√®te** : [Docker README](docker/README.md)

#### D√©marrage rapide

```bash
# 1. Cloner le projet
git clone <url-du-repo>
cd T-YEP-600-REN_13

# 2. Construire et d√©marrer les conteneurs
docker compose -f docker/docker-compose.yml up --build
```

L'application sera accessible sur :

- **Application Rails** : [http://localhost:3000](http://localhost:3000)
- **Serveur Vite (HMR)** : [http://localhost:3036/vite-dev/](http://localhost:3036/vite-dev/)

#### Commandes Docker essentielles

```bash
# D√©marrer en arri√®re-plan
docker compose -f docker/docker-compose.yml up -d

# Arr√™ter les conteneurs
docker compose -f docker/docker-compose.yml down

# Console Rails dans le conteneur
docker compose -f docker/docker-compose.yml exec web rails c

# Shell dans le conteneur
docker compose -f docker/docker-compose.yml exec web bash
```

### üõ†Ô∏è Option B : Installation locale

### 1. Cloner le projet

```bash
git clone <url-du-repo>
cd T-YEP-600-REN_13
```

### 2. Installation des d√©pendances Ruby

```bash
bundle install
```

### 3. Installation des d√©pendances Node.js

```bash
npm install
```

### 4. Configuration de la base de donn√©es

```bash
# Cr√©er la base de donn√©es
rails db:create

# Ex√©cuter les migrations
bin/rails db:migrate

# (Optionnel) Charger les donn√©es de test
rails db:seed
```

### 5. R√©solution des probl√®mes courants

Si vous rencontrez des erreurs avec Rollup/Vite :

```bash
# Supprimer les fichiers probl√©matiques
rm -rf node_modules package-lock.json

# R√©installer les d√©pendances
npm install
```

Si vous avez des warnings avec les gems :

```bash
gem cleanup stringio
```

Acc√®s :

- **Application** : [http://localhost:3000](http://localhost:3000)
- **Vite HMR** : [http://localhost:3036/vite-dev/](http://localhost:3036/vite-dev/)

### üõ†Ô∏è Installation locale - D√©marrage complet (recommand√©)

```bash
bin/dev
```

Cette commande lance simultan√©ment :

- üåê **Serveur Rails** sur `http://localhost:3000`
- ‚ö° **Serveur Vite** (assets frontend)

### Commandes alternatives (installation locale)

```bash
# Serveur Rails uniquement
rails server
# ou
rails s

# Serveur sur un port sp√©cifique
rails s -p 4000
```

## Commandes de d√©veloppement

### üê≥ Commandes Docker

```bash
# Console Rails
docker compose -f docker/docker-compose.yml exec web rails c

# G√©n√©rer un mod√®le, contr√¥leur, etc.
docker compose -f docker/docker-compose.yml exec web rails generate MODEL/CONTROLLER

# Ex√©cuter les migrations
docker compose -f docker/docker-compose.yml exec web rails db:migrate

# Console base de donn√©es
docker compose -f docker/docker-compose.yml exec web rails db

# Shell dans le conteneur
docker compose -f docker/docker-compose.yml exec web bash

# Voir les logs
docker compose -f docker/docker-compose.yml logs web

# Red√©marrer les services
docker compose -f docker/docker-compose.yml restart
```

### üõ†Ô∏è Installation locale

#### Base de donn√©es

```bash
# Cr√©er une nouvelle migration
rails generate migration NomDeLaMigration

# Ex√©cuter les migrations
rails db:migrate

# Rollback de la derni√®re migration
rails db:rollback

# Reset complet de la DB
rails db:reset

# Console Rails
rails console
# ou
rails c
```

### G√©n√©ration de code

```bash
# G√©n√©rer un mod√®le
rails generate model User name:string email:string

# G√©n√©rer un contr√¥leur
rails generate controller Users index show

# G√©n√©rer un contr√¥leur avec vues
rails generate controller Pages home about --skip-routes

# G√©n√©rer une migration standalone
rails generate migration AddAgeToUsers age:integer
```

### Tests

```bash
# Lancer tous les tests
bundle exec rspec

# Lancer un fichier de test sp√©cifique
bundle exec rspec spec/models/user_spec.rb

# Lancer les tests avec coverage
COVERAGE=true bundle exec rspec
```

### Assets et Frontend

```bash
# Compiler les assets pour la production
rails assets:precompile

# Nettoyer les assets
rails assets:clean

# Watcher Tailwind CSS uniquement
rails tailwindcss:watch

# Build Vite pour la production
npm run build
```

### Outils de qualit√© de code

```bash
# Rubocop (linter Ruby)
bundle exec rubocop

# Rubocop avec auto-correction
bundle exec rubocop -a
```

## Structure du projet

```

‚îú‚îÄ‚îÄ app/
‚îÇ ‚îú‚îÄ‚îÄ controllers/ # Contr√¥leurs Rails
‚îÇ ‚îú‚îÄ‚îÄ helpers/
‚îÇ ‚îú‚îÄ‚îÄ models/ # Mod√®les ActiveRecord
‚îÇ ‚îú‚îÄ‚îÄ views/ # Vues ERB
‚îÇ ‚îú‚îÄ‚îÄ frontend/ # Code frontend (TS/Vue)
‚îÇ ‚îú‚îÄ‚îÄ Service/
‚îÇ ‚îî‚îÄ‚îÄ assets/ # _Vide assets pr√©sent /frontend/images/ _
‚îú‚îÄ‚îÄ config/ # Configuration Rails
‚îú‚îÄ‚îÄ db/ # Migrations et sch√©ma DB
‚îú‚îÄ‚îÄ spec/ # Tests RSpec
‚îú‚îÄ‚îÄ bin/ # Scripts ex√©cutables
‚îú‚îÄ‚îÄ Gemfile # D√©pendances Ruby
‚îú‚îÄ‚îÄ package.json # D√©pendances Node.js
‚îî‚îÄ‚îÄ Procfile.dev # Configuration des processus de dev

```

## Notes

- L'application utilise Vue Tailwind CSS, ainsi que la lib Shad/Cn pour un frontend moderne
- Devise est configur√© pour l'authentification
- PostgreSQL est utilis√© en d√©veloppement et production
